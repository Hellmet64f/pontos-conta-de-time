<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Comets (TCS) - Estatísticas</title>
    
    <!-- FAVICON (ÍCONE DA ABA) -->
    <link rel="icon" href="https://i.imgur.com/g8e1a5j.png" type="image/png">
    
    <!-- FONTES DO GOOGLE -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!--
    ===================================================================
    CSS - O ESTILO DO SITE
    ===================================================================
    -->
    <style>
        :root {
            --background: #111827;
            --surface: #1f2937;
            --surface-light: #374151;
            --primary: #f43f5e;
            --primary-hover: #db2777;
            --secondary: #3b82f6;
            --success: #10b981;
            --danger: #ef4444;
            --text-light: #f9fafb;
            --text-normal: #d1d5db;
            --text-muted: #9ca3af;
            --border: #4b5563;
        }

        /* RESET BÁSICO */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--text-normal);
            padding: 2rem 1rem;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* HEADER */
        header {
            text-align: center;
            margin-bottom: 2.5rem;
        }
        .logo {
            width: 100px;
            height: 100px;
            margin-bottom: 1rem;
            animation: fadeInDown 0.6s ease;
        }
        h1.team-name {
            color: var(--text-light);
            font-size: 2.5rem;
            font-weight: 700;
            animation: fadeInDown 0.8s ease;
        }

        /* SEÇÕES */
        .card {
            background-color: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            animation: fadeInUp 0.5s ease;
        }
        .card h2 {
            font-size: 1.75rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 0.5rem;
        }
        .card-header { display: flex; justify-content: space-between; align-items: center; }

        /* TABELAS */
        table { width: 100%; border-collapse: collapse; }
        thead { border-bottom: 2px solid var(--border); }
        th { padding: 1rem; text-align: left; font-weight: 600; color: var(--text-muted); }
        td { padding: 1rem; text-align: left; border-bottom: 1px solid var(--border); }
        tbody tr:last-child td { border-bottom: none; }
        tbody tr { transition: background-color 0.2s ease; }
        tbody tr:hover { background-color: var(--surface-light); }

        /* DESTAQUES VISUAIS NA TABELA */
        td:first-child { font-weight: 600; color: var(--text-light); }
        .pos { color: var(--secondary); font-size: 1.25rem; }
        .status-qualified { color: var(--success); font-weight: 600; }
        .status-not-qualified { color: var(--danger); font-weight: 600; }

        /* FORMULÁRIO DO ADMIN */
        .form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        input[type="text"], input[type="number"] {
            width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border);
            background-color: var(--background); color: var(--text-normal); font-size: 1rem;
            transition: all 0.2s ease;
        }
        input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(244, 63, 94, 0.3); }

        .btn {
            display: inline-block; width: 100%; padding: 1rem;
            background-color: var(--primary); color: white;
            border: none; border-radius: 8px; font-size: 1rem; font-weight: 600;
            cursor: pointer; text-align: center; text-decoration: none;
            transition: all 0.2s ease;
            grid-column: 1 / -1; /* Ocupa todas as colunas do grid */
            margin-top: 1rem;
        }
        .btn:hover { background-color: var(--primary-hover); transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .btn-remove {
            background-color: var(--danger); opacity: 0.7; color: white;
            border: none; border-radius: 50%; width: 28px; height: 28px;
            cursor: pointer; font-weight: bold; font-family: monospace; font-size: 1.2rem;
            display: flex; justify-content: center; align-items: center;
            transition: all 0.2s ease;
        }
        .btn-remove:hover { opacity: 1; transform: scale(1.1) rotate(90deg); }

        /* REGRAS */
        .rules-list { list-style: none; padding-left: 0; }
        .rules-list li { margin-bottom: 0.5rem; }

        /* ANIMAÇÕES */
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* MODO ADMIN ESCONDIDO */
        #admin-panel {
            transition: all 0.5s ease;
            max-height: 0;
            overflow: hidden;
            padding: 0 2rem;
            margin: 0;
            opacity: 0;
        }
        #admin-panel.visible {
            max-height: 1000px; /* Suficiente para o conteúdo */
            padding: 2rem;
            margin-bottom: 2rem;
            opacity: 1;
        }
        .toggle-admin {
            position: fixed; top: 1rem; right: 1rem;
            background: var(--secondary); color: white; border: none;
            padding: 0.5rem 1rem; border-radius: 50px; cursor: pointer;
        }

    </style>
</head>
<body>

    <div class="container">
        <!-- ========================== CABEÇALHO ========================== -->
        <header>
            <img src="https://i.imgur.com/g8e1a5j.png" alt="Logo The Comets" class="logo">
            <h1 class="team-name">The Comets (TCS)</h1>
        </header>

        <!-- ========================== BOTÃO PARA MOSTRAR ADMIN ========================== -->
        <button id="toggle-admin-button" class="toggle-admin">Admin</button>

        <main>
            <!-- ========================== PAINEL DO ADMIN (ESCONDIDO POR PADRÃO) ========================== -->
            <section id="admin-panel" class="card">
                <h2>Painel de Controle</h2>
                <form id="player-form">
                    <div class="form-grid">
                        <div>
                            <label for="player-name">Nome do Jogador</label>
                            <input type="text" id="player-name" required>
                        </div>
                        <div>
                            <label for="goals">Gols</label>
                            <input type="number" id="goals" min="0" value="0">
                        </div>
                        <div>
                            <label for="assists">Assistências</label>
                            <input type="number" id="assists" min="0" value="0">
                        </div>
                        <div>
                            <label for="saves">Salvos</label>
                            <input type="number" id="saves" min="0" value="0">
                        </div>
                        <div>
                            <label for="dribbles">Dribles</label>
                            <input type="number" id="dribbles" min="0" value="0">
                        </div>
                    </div>
                    <button type="submit" class="btn">Adicionar / Atualizar Jogador</button>
                </form>

                <h2 style="margin-top: 2.5rem;">Lista de Jogadores</h2>
                <table id="admin-table">
                    <thead><tr><th>Nome</th><th>Estatísticas (G/A/S/D)</th><th>Ação</th></tr></thead>
                    <tbody id="admin-player-list"></tbody>
                </table>
            </section>
            
            <!-- ========================== SEÇÃO PÚBLICA: CLASSIFICAÇÃO ========================== -->
            <section class="card">
                <div class="card-header">
                    <h2>Classificação Geral</h2>
                </div>
                <table>
                    <thead><tr><th>Pos.</th><th>Nome</th><th>Pontos</th><th>Status</th></tr></thead>
                    <tbody id="ranking-list"></tbody>
                </table>
            </section>
            
             <!-- ========================== SEÇÃO PÚBLICA: REGRAS ========================== -->
            <section class="card">
                <h2>Critérios de Pontuação</h2>
                <ul class="rules-list">
                    <li><strong style="color:var(--primary)">Média de 6.0 pontos</strong> para se qualificar para o time principal.</li>
                    <li><strong>3 Pontos</strong> por Gol.</li>
                    <li><strong>2 Pontos</strong> por Salvo (defesa).</li>
                    <li><strong>1 Ponto</strong> a cada 7 Assistências.</li>
                    <li><strong>1 Ponto</strong> a cada 5 Dribles.</li>
                </ul>
            </section>

        </main>
    </div>

    <!--
    ===================================================================
    JAVASCRIPT - A LÓGICA DO SITE
    ===================================================================
    -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // ========================== CONSTANTES E ELEMENTOS DO DOM ==========================
        const QUALIFICATION_AVERAGE = 6.0;
        const STORAGE_KEY = 'tcs_players_ultimate';
        const adminPanel = document.getElementById('admin-panel');
        const adminToggleButton = document.getElementById('toggle-admin-button');
        const playerForm = document.getElementById('player-form');
        const rankingList = document.getElementById('ranking-list');
        const adminPlayerList = document.getElementById('admin-player-list');
        
        // ========================== FUNÇÕES DE DADOS (LER, SALVAR) ==========================
        const getPlayers = () => JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
        const savePlayers = (players) => localStorage.setItem(STORAGE_KEY, JSON.stringify(players));

        // ========================== FUNÇÃO DE CÁLCULO DE PONTOS ==========================
        const calculatePoints = (player) => {
            return (
                (player.goals || 0) * 3 +
                (player.saves || 0) * 2 +
                Math.floor((player.assists || 0) / 7) +
                Math.floor((player.dribbles || 0) / 5)
            );
        };
        
        // ========================== FUNÇÕES DE RENDERIZAÇÃO (MOSTRAR DADOS NA TELA) ==========================
        const renderUI = () => {
            renderRankingTable();
            renderAdminTable();
        };

        const renderRankingTable = () => {
            rankingList.innerHTML = '';
            const players = getPlayers();

            if (players.length === 0) {
                rankingList.innerHTML = '<tr><td colspan="4" style="text-align:center; padding:2rem;">Nenhum jogador cadastrado.</td></tr>';
                return;
            }

            // Adiciona pontos e ordena
            players.forEach(p => p.points = calculatePoints(p));
            players.sort((a, b) => b.points - a.points);
            
            // Cria as linhas da tabela
            players.forEach((player, index) => {
                const status = player.points >= QUALIFICATION_AVERAGE ? 'Qualificado' : 'Não Qualificado';
                const statusClass = status === 'Qualificado' ? 'status-qualified' : 'status-not-qualified';
                
                const row = rankingList.insertRow();
                row.innerHTML = `
                    <td><span class="pos">${index + 1}º</span></td>
                    <td>${player.name}</td>
                    <td>${player.points.toFixed(1)}</td>
                    <td class="${statusClass}">${status}</td>
                `;
            });
        };

        const renderAdminTable = () => {
            adminPlayerList.innerHTML = '';
            const players = getPlayers();

            if (players.length === 0) {
                adminPlayerList.innerHTML = '<tr><td colspan="3" style="text-align:center; padding:2rem;">Nenhum jogador adicionado.</td></tr>';
                return;
            }
            
            // Cria as linhas da tabela
            players.forEach((player, index) => {
                const row = adminPlayerList.insertRow();
                row.innerHTML = `
                    <td>${player.name}</td>
                    <td>${player.goals} / ${player.assists} / ${player.saves} / ${player.dribbles}</td>
                    <td><button class="btn-remove" data-index="${index}">X</button></td>
                `;
            });
        };
        
        // ========================== EVENT LISTENERS (AÇÕES DO USUÁRIO) ==========================
        
        // Mostrar/esconder painel admin
        adminToggleButton.addEventListener('click', () => {
            adminPanel.classList.toggle('visible');
            adminToggleButton.textContent = adminPanel.classList.contains('visible') ? 'Fechar' : 'Admin';
        });

        // Enviar o formulário para adicionar/atualizar jogador
        playerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const playerName = document.getElementById('player-name').value.trim();
            const players = getPlayers();

            const playerData = {
                name: playerName,
                goals: parseInt(document.getElementById('goals').value) || 0,
                assists: parseInt(document.getElementById('assists').value) || 0,
                saves: parseInt(document.getElementById('saves').value) || 0,
                dribbles: parseInt(document.getElementById('dribbles').value) || 0
            };
            
            const existingIndex = players.findIndex(p => p.name.toLowerCase() === playerName.toLowerCase());
            
            if (existingIndex > -1) {
                players[existingIndex] = playerData; // Atualiza
            } else {
                players.push(playerData); // Adiciona
            }
            
            savePlayers(players);
            renderUI(); // Atualiza ambas as tabelas
            playerForm.reset();
        });

        // Clicar no botão de remover
        adminPlayerList.addEventListener('click', (e) => {
            if (e.target.classList.contains('btn-remove')) {
                const indexToRemove = parseInt(e.target.dataset.index);
                if (confirm('Tem certeza que deseja remover este jogador?')) {
                    const players = getPlayers();
                    players.splice(indexToRemove, 1);
                    savePlayers(players);
                    renderUI(); // Atualiza ambas as tabelas
                }
            }
        });

        // ========================== CARGA INICIAL ==========================
        renderUI(); // Desenha as tabelas quando a página carrega

    });
    </script>
</body>
</html>
